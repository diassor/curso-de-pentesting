Informacion a partir de DNS


como obtener mas informacion a partir del DNS

teminal
	host (comando)
			nota un nombre de dominio puede estar relacionado
			con otros servidores para redirigir el trafico y que
			el servidor no se caiga por saturacion

			unal.edu.co

			comando basico para hacer un query de DNS

			DNSenum
				listar todos los subdominios que esten en
				este dominio


nota = ( DNS es una red de servidores que estan en regados
	en todo el planeta )
	siempre tenemos unservidor DNS por defecto
	 	regularmente uno que proporciona el prestador
		de serviocio

	si el tiene la informacion la da si no la tiene
	solo va a otro servidor llamado servidor raiz
	este es el que centraliza toda la informacion de
	dominios registrados en todo internet

	cuando el servidor dice yo no conozco esta direccion
	el hace algo que se llama zona de transferencia
	es la forma la cual un servidor dns le envia la
	informacion a otro
	es muy importante la zona de transferencia

	ejemplo

	dnsenum unal.edu.co
		lista todos los subdominios
		podemos especificar el nombre de dominio que
		queremos en particular

	dnsenum enal.edu.co --server 8.8.8.8

	si esta este servidor nos dara informacion adicional

	volviendo al anterior ya tenemos muchas direcciones
	ip (ahora es cuestion de analizar cada una de la ip
	encontradas )

dnsmap(otro comando)

	muchas veces el servidor dns o al servidor que se
	este apuntando tiene algunos  nombres de dominios
	los nombres de dominio cambian se actualizan las companias
	estan creando nuevos nombre de dominios
	y algunos nombres de dominios no se registran totalmente
	por que son nombres que no se usan comercialmente
	son de uso interno

	lo que hacemos con dnsmap es combinar con diferente
	nombres de letras tras diferentes combinaciones de
	palabras (ataque de fuerza bruta) a los dns

	ataque de fuerza bruta (es combinar todas las combinaciones
	posibles para llegar a un resultado positivo)

	cd /usr/share/wordlist

	vienen algunos archivos de textos con un monton
	de palabras que nos pueden servir

	vamos a copiar el de dnsmap y lo vamos a llevar al
	directorio de inicio

	cp dnsmap.txt  ~/dnsmap.txt

	less dnsmap.txt
	tiene una combinacion de tres letras que son
	comunes en nombres de dominio

	dnsmap unal.edu.co -w(parametro para que use algo)

	dnsmap.txt

	lo que el va a hacer es probar subdominios con esa
	combinacion  de palabras para identificar si hay mas
	servicios disponibles que no esta indexados en las
	consultas normales a los servisdores dns


	dnsmap unal.edu.co -w dnsmap.txt

	entrea algunos servicios o subdominios que
	efectivamente existen que pueden estar asociados
	a otras ip que no habiamos identificado antes
	toma tiempo de 20 minutos en adelante podemos
	ver algunos resultados
	comienza su ataque de fuerza bruta por el orden que
	estan las palabras en este caso estan en orden
	alfabetico
	cuando creemos que ya tenemos suficientes cancelamos
	el proceso
	contro + c (cancelacion de procesos )


nslookup =
	es una herramienta que tiene su propia linea de
	comandos su propia consola que nos permite hacer
	algunas busquedas

	nota =
		los servidores DNS las query tienen diferentes
		caracteristicas
		los diferentes query de DNS
		por ejemplo
			cuando hacemos un query mx estamos
			haciendo unquery a los servidores de
			correo electronicos

		nslookup ==>
			server 8.8.8.8  (es el servidor de google)

		vamos a decirle que nos muestre
		cualquier tipo de registro de dns la ip

		set type=any
		unal.edu.co
		 	comienza con la busqueda

			nos da mucha informacion de la ip que
			tiene ese dominio

			root@kali-server:~# nslookup
		> server 8.8.8.8
		Default server: 8.8.8.8
		Address: 8.8.8.8#53
		> set type=any
		> unal.edu.co
		Server:		8.8.8.8
		Address:	8.8.8.8#53

		Non-authoritative answer:
		Name:	unal.edu.co
		Address: 35.153.234.9
		unal.edu.co	nameserver = ns-1198.awsdns-21.org.
		unal.edu.co	nameserver = ns-1583.awsdns-05.co.uk.
		unal.edu.co	nameserver = ns-464.awsdns-58.com.
		unal.edu.co	nameserver = ns-984.awsdns-59.net.
		unal.edu.co
			origin = ns-1583.awsdns-05.co.uk
			mail addr = awsdns-hostmaster.amazon.com
			serial = 2019020418
			refresh = 7200
			retry = 900
			expire = 1209600
			minimum = 86400
		unal.edu.co	mail exchanger = 10 aspmx.l.google.com.
		unal.edu.co	mail exchanger = 20 alt1.aspmx.l.google.com.
		unal.edu.co	mail exchanger = 20 alt2.aspmx.l.google.com.
		unal.edu.co	mail exchanger = 30 aspmx2.googlemail.com.
		unal.edu.co	mail exchanger = 30 aspmx3.googlemail.com.
		unal.edu.co	mail exchanger = 30 aspmx4.googlemail.com.
		unal.edu.co	mail exchanger = 30 aspmx5.googlemail.com.
		unal.edu.co	mail exchanger = 50 filtromx15.unal.edu.co.
		unal.edu.co	mail exchanger = 50 filtromx175.unal.edu.co.
		unal.edu.co	mail exchanger = 50 filtromx61.unal.edu.co.
		unal.edu.co	mail exchanger = 50 filtromx70.unal.edu.co.
		unal.edu.co	text = "MS=ms55463604"
		unal.edu.co	text = "Z1Y3F64MrfpX/iqU8yRHurjGEp35hG52LwBqdG9i8Ec="
		unal.edu.co	text = "v=spf1 include:_spf.unal.edu.co include:_spf.google.com ~all"

		Authoritative answers can be found from:


****************************************************************************
*****************************************************************************

ahora vamos a buscar los que son solo de Email
(mx)

> set type=mx
> unal.edu.co
Server:		8.8.8.8
Address:	8.8.8.8#53

Non-authoritative answer:
unal.edu.co	mail exchanger = 10 aspmx.l.google.com.
unal.edu.co	mail exchanger = 20 alt1.aspmx.l.google.com.
unal.edu.co	mail exchanger = 20 alt2.aspmx.l.google.com.
unal.edu.co	mail exchanger = 30 aspmx2.googlemail.com.
unal.edu.co	mail exchanger = 30 aspmx3.googlemail.com.
unal.edu.co	mail exchanger = 30 aspmx4.googlemail.com.
unal.edu.co	mail exchanger = 30 aspmx5.googlemail.com.
unal.edu.co	mail exchanger = 50 filtromx15.unal.edu.co.
unal.edu.co	mail exchanger = 50 filtromx175.unal.edu.co.
unal.edu.co	mail exchanger = 50 filtromx61.unal.edu.co.
unal.edu.co	mail exchanger = 50 filtromx70.unal.edu.co.

Authoritative answers can be found from:
