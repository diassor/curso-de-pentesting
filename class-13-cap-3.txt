capitulo 3 Escaneo y analisis de vulnerabilidades

titulo Presentacion de la fase de escaneo

Para cada uno de los servicios de auditoria tenemos 4 fases:

	1- determinar si un sistema esta encendido
	2- hacer escaneo de puertos
	3- obtener información de servicios
	4- Escanear vulnerabilidades


vamos a empezar a identificar las vulnerabilidades y protocolos


	1- determinar si esta encendido


	dos protocolos muy usados en redes

User Datagram Protocol (UDP)
	envia informacion de un lado a otro sin confirmacion
	de llegada de mensaje
	Este protocolo se usa mucho en striming por que
	es mas importante mantener la continuidad
	y la sincronizacion a tiempo ,
	ejemplo
		si estamos viendo television o la transmision
		de un evento en vivo
		es mas importante mantener el flujo de paquetes


Transmission Control Protocol (TCP)
	este protocolo permite asegurar la confirmacion
	de llegada de paquetes
	de este protocolo nos vamos a aprovechar lo mas
	que podamos .
	Por que es un protocolo que cuando se inicia la
	comunicacion para controlar y asegurar la coneccion
	entre los dos enlaces (usa el saludo de tre vias AKN)
	y se saludo nos va a permitir establer o confirmar que
	estoy conectado o hay una comunicacion efectiva con el
	servidor objetivo o el destino en el que estoy apuntando


	estructura de un archivo tcp
	(https://es.wikipedia.org/wiki/Segmento_TCP)

	se habla de un puerto fuente y un puerto destino

	Flags (9 bits):

	NS (1 bit): ECN-nonce concealment protection.
		Para proteger frente a paquetes accidentales
		o maliciosos que se aprovechan del control de
		congestión para ganar ancho de banda de la red.

	CWR (1bit): Congestion Window Reduced.
		El flag se activa por el host emisor para indicar
		que ha recibido un segmento TCP con el flag
		ECE activado y ha respondido con el mecanismo de
		control de congestión.

	ECE (1 bit): Para dar indicaciones sobre congestión.

	URG (1 bit): Indica que el campo del puntero urgente
		es válido.

	ACK (1 bit): Indica que el campo de asentimient
		o es válido.
		Todos los paquetes enviados después del paquete
		SYN inicial deben tener activo este flag.

	PSH (1 bit): Push.
		El receptor debe pasar los datos a la aplicación
		tan pronto como sea posible, no teniendo que
		esperar a recibir más datos.

	RST (1 bit): Reset.
		Reinicia la conexión, cuando falla un intento
		de conexión, o al rechazar paquetes no validos.

	SYN (1 bit): Synchronice.
		Sincroniza los números de secuencia para iniciar
		la conexión.

	FIN (1 bit): Para que el emisor
		(del paquete) solicite la liberación de la
		conexión.


	las interfases se identifican con las ip por medio de
	los adptadores de red ejemplo
	una laptop con coneccion ethernet and wife tienen
	dos direcciones ip diferentes
	y en cada una de estas ip estan asociados mas de 65 mil puertos
	que lo que hace establecer ciertos servicios

	Http = puerto 80

	por que se hace lo de los puertos ?
		normalmente se hace por que una ip puede
		proporcionar muchos servicios
		es una manera de establecer canales de comunicacion
		osea los 65 mil puertos que hay para usar

		tienen diferentes servicios ejemplo :

	yo quiero tener en un servidor al mismo tiempo
	un servicio web y adicionalmente que yo tenga un
	servicio de shell (para hacer un login o telnet )

	acknowfedgement (ACK Numero de acuse de recibido)

	muy importante las seis partes de paquetes
	(son las que se encuentran en el octeto 12 bit 96
	logintud de cabecera | reservado
		|NS|CWR|ECE|URG|ACK|PSH|SYN|FIN|  tamano de ventana)

	un bit son banderas si marca 0 o 1 los secmentos
	anteriores se activan con el 0 apagado  y 1 encendido

	TCP :
		tiene un saludo de tres vias

		1 ~ syn (primer envio a un puerto especifico
				si el puerto esta open el responde con )

		2 ~ SYN-ACK (se puede decir que es un reconocimiento
					de Synchronice y cuando se recive el SYN-ACK
					el responde con ACK (3))

		3 ~ ACK respuesta al SYN-ACK para finalizar su Synchronice

		Ejemplo
			Cuando llamas por telefono
			1 ~ SYN	        alo
			2 ~ SYN-ACK 	si alo quien es ?
			3 ~ ACK     	soy yo julano de tal

			hay que aprender a usar y manipular las banderas
			de y este saludo tcp para identificar si el
			servidor esta dispuesto a utilizar o recivir
			informacion a traves de cada uno de los diferentes puertos


Números de puerto bien conocidos usados por TCP y UDP. También se añade algún otro puerto no asignado oficialmente por IANA, pero de interés general dado el uso extendido que le da alguna aplicación.
(https://es.wikibooks.org/wiki/Redes_inform%C3%A1ticas/Protocolos_TCP_y_UDP_en_el_nivel_de_transporte)

muchos pueros con buena información

	hay que tener muy encuenta todos los puertos para ver cual podemos
	usar para el pent test

	Muchos administradores  cierran los puertos por
	defecto y los servicios funcionan por otros puertos

	por eso hay que buscar en otros puertos
	
