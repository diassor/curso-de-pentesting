Barrido de pings y barrido de puertos usando fpingy nmap

analisis de redes
	 face de escaneo antes del analisis

comando fping para hacer barrido de red
	se usa el protocolo icmp

	este utiliza un paquete en saludo tcp para ir y preguntar
	si la maquina o equipo esta activo

	Es importante tener en cuenta que no todas las maquinas que
	esten activas necesariamente van a responder a un pin
	por que un firewall o una politica de puertos puede tener
	cerrada la respuesta ping

	man fping nos muestra los parametros

	fping - send ICMP ECHO_REQUEST packets to network hosts

	estamos enviando a traves del protocolo icmp estamos
	enviando solicitudes a host de una red
	tenemos varios parametros para escoger

SYNOPSIS
       fping [ options ] [ systems... ]

DESCRIPTION
       fping is a program like ping which uses the Internet Control Message
       Protocol (ICMP) echo request to determine if a target host is
       responding.  fping differs from ping in that you can specify any number
       of targets on the command line, or specify a file containing the lists
       of targets to ping.  Instead of sending to one target until it times
       out or replies, fping will send out a ping packet and move on to the
       next target in a round-robin fashion.  In the default mode, if a target
       replies, it is noted and removed from the list of targets to check; if
       a target does not respond within a certain time limit and/or retry
       limit it is designated as unreachable. fping also supports sending a
       specified number of pings to a target, or looping indefinitely (as in
       ping ). Unlike ping, fping is meant to be used in scripts, so its
       output is designed to be easy to parse.

	   -a, --alive
               Show systems that are alive.

	este parametro nos ayuda mostrandonos muchos parametros
	y generalmente solo nos interesa los que estan vivos


	-g, --generate addr/mask
		   Generate a target list from a supplied IP netmask, or a starting
		   and ending IP.  Specify the netmask or start/end in the targets
		   portion of the command line. If a network with netmask is given,
		   the network and broadcast addresses will be excluded. ex. To ping
		   the network 192.168.1.0/24, the specified command line could look
		   like either:

			$ fping -g 192.168.1.0/24

		   or

			$ fping -g 192.168.1.1 192.168.1.254

	este genera  una lista de rango

	-h, --help
		   Print usage message.

	show ayuda

	ejemplo

root@kali-server:~# fping -a -g 192.168.1.1 192.168.1.254 > host-casa.txt

	-a = show systems that are alive.
	-g =  rango de escaneo

	> host-casa.txt es el archivo que crea guardando Los
		secmentos de red que estan activos


el hecho que una ip no responda a un ping no implica
que no este activo

	Ahora vamos a ver los puertos que estan diponibles en
	cada uno de esos hosts
		(recordemos que cada segmneto de red o ip tiene
		al rededor de mas de 65 mil host )

	todos estos puertos me permiten acceder a diferentes
	servicios simultaneamente y que la maquina que recive la
	solicitud sepa a cual corresponde


	############################################3
	#############################################

analisis de puertos con nmap
	herramienta muy potente para hacer analisis de
	redes a traves de descubriemtos de puertos y otros hosts
	en diferentes sistemas

	root@kali-server:~# nmap 192.168.1.1
Starting Nmap 7.70 ( https://nmap.org ) at 2019-06-07 23:46 EDT
Nmap scan report for openrg.home (192.168.1.1)
Host is up (0.044s latency).
Not shown: 990 closed ports
PORT     STATE SERVICE
80/tcp   open  http
139/tcp  open  netbios-ssn
443/tcp  open  https
445/tcp  open  microsoft-ds
515/tcp  open  printer
631/tcp  open  ipp
2869/tcp open  icslap
4567/tcp open  tram
8080/tcp open  http-proxy
8443/tcp open  https-alt
MAC Address: AC:84:C9:8E:63:E1 (Sagemcom Broadband SAS)

Nmap done: 1 IP address (1 host up) scanned in 6.08 seconds


	el tiempo es clave , puede depender de la estructa de red
	pueden demorar

nmap hace un escaneo a los 1000 puertos mas comunes
lo que hacen los administradores de red es usar otros
puertos  para evitar los ataques mas comunes

vamos a modificar los valores de escaneo de puertos
que viene por defectos solo para ver si hay mas
puertos abiertos fuera de los comunes

no siempre las maquinas responden a los ping
nmap hace una face (the discovery ) que es basicamente
ejecutar un ping

nmap hacwe un ping si la maquina le responde empieza
a recorrer los puertos
	ahora ademas vamos lo que vamos a hacer es desactivar
	esa face de ping para ahorrar un poco de tiempo y ademas
	si lo vamos hace en una maquina que no haya respondido a
	ping el va a escanear los puertos aun que la maquina no
	haya respondido al ping


root@kali-server:~# nmap 192.168.1.2
	Starting Nmap 7.70 ( https://nmap.org ) at 2019-06-07 23:50 EDT
	Note: Host seems down.
		If it is really up, but blocking our ping probes,
		try -Pn

	Nmap done: 1 IP address (0 hosts up)
	scanned in 0.59 seconds

root@kali-server:~# nmap -Pn 192.168.1.2
	Starting Nmap 7.70 ( https://nmap.org ) at
		2019-06-07 23:51 EDT
	Nmap done: 1 IP address (0 hosts up)
		scanned in 0.61 seconds

	-Pn es el comando para saltarse el paso de
		the discovery

	-p- este comando es para decirle a nmap que
		recorra los 65 mil puertos

en la auditoria es importante revizar todos los puertos ya
que pueden tener otros servicios que podemos atacar

##################################################

root@kali-server:~# nmap -Pn -p- 192.168.1.1 > nmap-scan-casa.txt

	 > nmmp-scan-casa.txt es el archivo creado para
	 	guardar la informaci√≥n optenida



atacando un puerto especifico
ejemplo
###########################################
########################################33
root@kali-server:~# nmap -p445  192.168.1.8
	Starting Nmap 7.70 ( https://nmap.org ) at 2019-06-08 00:17 EDT
	Nmap scan report for edwin-Dell.home (192.168.1.8)
	Host is up (0.00025s latency).

		PORT    STATE SERVICE
		445/tcp open  microsoft-ds
		MAC Address: 20:68:9D:E1:C4:57 (Liteon Technology)

Nmap done: 1 IP address (1 host up) scanned in 0.34 seconds
########################################33
#########################################3

aqui muestra el tiempo de trabajo

hay que hacer muchos ejercicios para comprender
bien el tema de nmap
