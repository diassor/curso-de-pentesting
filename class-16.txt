Barrido de pings con nmap y analisis de UDP

en la clase anteerior vimos el uso TCP y el saludo de tres vias
y tambien vimos como nmap hace un mapeo de ping acompanado
de un saludo TCP antes de hacer la peticion que nosotros
le pidamos

vamos hacer las mismas pruebas pero con varias ips

con el comando -iL (nombre del archivo) se hace el Escaneo
solo de las ip que se encuntren dentro de ese archivo osea
ese sera el rango a buscar

root@kali-host:~/Desktop/pruebas-platzi# nmap -sn -iL fping-metaspotable.txt
Starting Nmap 7.70 ( https://nmap.org ) at 2019-06-10 17:46 EDT
Nmap scan report for 192.168.20.23
Host is up (0.0013s latency).
Nmap scan report for 192.168.20.254
Host is up (0.0013s latency).
Nmap done: 2 IP addresses (2 hosts up) scanned in 13.08 seconds

###################################################
fping solo hace el saludo de ICMP para ver quien responde
mientra
nmap hace el saludo de tres vias
######################################################33
####################################################3

ejemplo
como hace un escaneo de rango con la terminacion -25


root@kali-host:~/Desktop/pruebas-platzi# nmap -sn 192.168.20.1-25
Starting Nmap 7.70 ( https://nmap.org ) at 2019-06-10 17:51 EDT

Nmap scan report for 192.168.20.23
	(es el resultado esperado)
Host is up (0.0011s latency).
Nmap done: 25 IP addresses (1 host up) scanned in 15.71 seconds


########################################3


UDP es muy diferente de TCP


UDP no  espera respuesta de recivido
la forma en que nmap hace el escaneo es mandando muchos paquetes
esperando  que alguno responda
como envia muchos paquetes a muchos puertos este
procedimiento demora demasiado
por tal motivo vamos a decirle que rango de puertos
queremos que ataque

########################
ejemplo

root@kali-host:~/Desktop/pruebas-platzi# nmap -Pn -p41-50 -sU 192.168.20.23
Starting Nmap 7.70 ( https://nmap.org ) at 2019-06-10 18:02 EDT
Nmap scan report for 192.168.20.23
Host is up (0.0019s latency).

PORT   STATE  SERVICE
41/udp closed graphics
42/udp closed nameserver
43/udp closed whois
44/udp closed mpm-flags
45/udp closed mpm
46/udp closed mpm-snd
47/udp closed ni-ftp
48/udp closed auditd
49/udp closed tacacs
50/udp closed re-mail-ck

Nmap done: 1 IP address (1 host up) scanned in 17.57 seconds

no hay ningun puerto abierto o filtrado

cuando hay unpuerto abierto/filtrado el no sabe
cual es la condicion
	hay dos situaciones

	1 ~ normalmente cuando un puerto esta cerrado la
		especificacion de UDp lo que dice es que
		si a mi me llega una cantidad de paquetes UDP a
		un puerto y este esta cerrado yo debo de responder
		con un paquete que diga cierre de conexion
		(es como un paquete de rechazo)
		pero funciona con el protocolo ICMP

		cuando recive un paquete de rechazo el sabe
		que ese puerto esta cerrado

		pero cuando no recibe respuesta de uno de esos puertos
		el dice ese puerto esta abierto o esta filtrado
		cuando un firewall filtra un puerto para un UDP
		lo que hace es no respoder

		Una de dos
			el trafico UDP efectivamente esta entrando
			o ingresando al host o al destino que estamos
			enviando
			o'
			hay un protocolo de firewall y este puerto
			esta descartado (filtrado) y esta configurado
			para que ese puerto nunca responda

			entonces lo que hace aparte de buscar
			cuales estan abiertos e identifica cuales
			estan cerrados por que identifico el paquete
			de rechazo y todos los demas los identifica
			com abierto o filtrado
